import { Canvas, Source } from '@storybook/addon-docs';

# BaseSelect

Является полем ввода. Представляет собой выпадающий список и предназначен для выбора одного значения из множества. Представлен тэгом `<base-select>`.

## Свойства

| Имя свойства | Описание                                                                                                                           | Значение                       |
|--------------|------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|
| validate     | Метод объекта узла DOM, который валидирует значение внутри компонента.                                                             | Функция                        |
| value        | Значение внутри поля ввода.                                                                                                        | Любое                          |
| invalid      | Сделать поле ввода валидным или невалидным. Если свойство указано, то внутренний валидатор отключается.                            | `false` - валидное поле, `true` - невалидное поле, другие значения - валидность не определена (при `required` равном `true` включается валидатор). |
| placeholder  | Текст отображаемый в компоненте без выбранного значения, выполняет роль подсказки.                                                 | Строка                         |
| value        | Предустановленное значение компонента.                                                                                             | Строка                         |
| label        | Текст который будет отображаться маленьким шрифтом над основным полем ввода.                                                       | Строка                         |
| size         | Задает размер элемента.                                                                                                            | 'small' \| 'big'               |
| required     | Флаг, обязательность значения у компонента. Если значения нет и флаг true, то свойство invalid также будет равно true.             | Логическое                     |
| search       | Флаг, означающий возможность поиска внутри поля компонента. Поиск происходит по подстроке текстового содержимого элементов слота.  | Логическое                     |
| theme        | Варианты отображения поля.                                                                                                         | Массив с названиями тем: ['']. |
| opened       | Открыт или раскрыт выпадающий список.                                                                                              | Логическое                     |
| disabled     | Флаг обозначающий возможность ввода значения в поле.                                                                               | Логическое                     |
| autoClose    | Отключение автоматического закрытия после клика по одному из пунков выпадающиего списка. По умолчанию "true".                      | "false"                        |

## Атрибуты

| Название        | Описание                     | Значение                    |
|-----------------|------------------------------|-----------------------------|
| theme           | Варианты отображения кнопки  | Название тем через запятую. |
| data-auto-close | Атрибут свойства "autoClose" |

## Слоты

| Имя события | Описание                                                                                                                                                                                                                                                                                                                |
|-------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| item        | Данный слот предназначен для элементов множества вариантов значения внутри компонента. Если у DOM-элемента этого слота есть свойство `value`, то значение именно этого свойства будет присвоено свойству `value` компонента. Если свойства `value` у элемента в слоте нет, то значением будет являться атрибут `data-visible-value`, иначе текст внутри элемента. Атрибут `data-visible-value` нужен для отображения в поле ввода видимого значения выбранного элемента. |
| label       | Аналогично свойству `label`.                                                                                                                                                                                                                                                                                            |

## События

| Название | Описание                                   |
|----------|--------------------------------------------|
| input    | Событие изменения данных внутри компонента |

## Примеры

Для использования компонента, с помощью соответствующего слота, требуется задать возможные варианты выбора:

<Canvas>
  <base-select>
    <div slot="item">Вариант 1</div>
    <div slot="item">Вариант 2</div>
  </base-select>
  <base-select data-auto-close="false">
    <div slot="item">Вариант 1</div>
    <div slot="item">Вариант 2</div>
  </base-select>
</Canvas>

<Source
language='html'
format={true}
dark
code={`
<base-select>
  <div slot="item">Вариант 1</div>
  <div slot="item">Вариант 2</div>
</base-select>
<base-select data-auto-close="false">
  <div slot="item">Вариант 1</div>
  <div slot="item">Вариант 2</div>
</base-select>
`}
/>

Выбор значения для элемента происходит с помощью клика по одному из доступных вариантов по следующему приоритету:
  1. Значение свойства value элемента, по которому был клик;
  2. Значение атрибута value элемента, по которому был клик;
  3. Значение свойства textContent элемента по которому был клик.

Размер элемента может быть задан с помощью соответствующего атрибута size, а текст подсказки - с помощью атрибута placeholder:

<Canvas>
  <base-select size="small" placeholder="Выберите значение">
    <div slot="item">Вариант 1</div>
    <div slot="item">Вариант 2</div>
  </base-select>
  <base-select size="middle" placeholder="Выберите значение">
    <div slot="item">Вариант 1</div>
    <div slot="item">Вариант 2</div>
  </base-select>
  <base-select size="big" placeholder="Выберите значение">
    <div slot="item">Вариант 1</div>
    <div slot="item">Вариант 2</div>
  </base-select>
</Canvas>

<Source
language='html'
format={true}
dark
code={`
<base-select size="small" placeholder="Выберите значение">
  <div slot="item">Вариант 1</div>
  <div slot="item">Вариант 2</div>
</base-select>
<base-select size="middle" placeholder="Выберите значение">
  <div slot="item">Вариант 1</div>
  <div slot="item">Вариант 2</div>
</base-select>
<base-select size="big" placeholder="Выберите значение">
  <div slot="item">Вариант 1</div>
  <div slot="item">Вариант 2</div>
</base-select>
`}
/>

Для удобного поиска по вариантам выбора можно использовать атрибут search, который активирует поле ввода для фильтрации содержимого элементов по подстроке в значении свойства [textContent](https://developer.mozilla.org/ru/docs/Web/API/Node/textContent) элементов выбора:

<Canvas>
  <base-select search>
    <div slot="item" value="1" data-visible-value="Один">Один (1)</div>
    <div slot="item" value="2" data-visible-value="Два">Два (2)</div>
    <div slot="item" value="3" data-visible-value="Три">Три (3)</div>
  </base-select>
</Canvas>

<Source
language='html'
format={true}
dark
code={`
<base-select search>
  <div slot="item" value="1" data-visible-value="Один">Один (1)</div>
  <div slot="item" value="2" data-visible-value="Два">Два (2)</div>
  <div slot="item" value="3" data-visible-value="Три">Три (3)</div>
</base-select>
`}
/>


Добавление подписи (label) через атрибут `label` и через слот `label`:

<Canvas>
  <base-select size="small" label="Подпись через атрибут">
    <div slot="item">Вариант 1</div>
    <div slot="item">Вариант 2</div>
  </base-select>
  <base-select label="Подпись через атрибут">
    <div slot="item">Вариант 1</div>
    <div slot="item">Вариант 2</div>
  </base-select>

  <base-select size="small">
    <span slot="label">Подпись в слоте</span>
    <div slot="item">Вариант 1</div>
    <div slot="item">Вариант 2</div>
  </base-select>
  <base-select>
    <span slot="label">Подпись в слоте</span>
    <div slot="item">Вариант 1</div>
    <div slot="item">Вариант 2</div>
  </base-select>
</Canvas>

<Source
language='html'
format={true}
dark
code={`
<base-select size="small" label="Подпись через атрибут">
  <div slot="item">Вариант 1</div>
  <div slot="item">Вариант 2</div>
</base-select>
<base-select label="Подпись через атрибут">
  <div slot="item">Вариант 1</div>
  <div slot="item">Вариант 2</div>
</base-select>

<base-select size="small">
  <span slot="label">Подпись в слоте</span>
  <div slot="item">Вариант 1</div>
  <div slot="item">Вариант 2</div>
</base-select>
<base-select>
  <span slot="label">Подпись в слоте</span>
  <div slot="item">Вариант 1</div>
  <div slot="item">Вариант 2</div>
</base-select>
`}
/>

Для отлавливания события input необходимо добавить соответствующий слушатель на элемент. В качестве примера приведен код для VueJS:

<Source
language='html'
format={true}
dark
code={`
<template>
  <base-select @input="inputHandler">
    <div slot="item">Вариант 1</div>
    <div slot="item">Вариант 2</div>
  </base-select>
</template>
`}
/>

<Source
language='js'
format={true}
dark
code={`
methods: {
  inputHandler(e) {
    console.log(e.target.value);
  },
},
`}
/>
